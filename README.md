# Kiro Activity Analyzer

A developer productivity analysis tool that helps you understand your coding patterns and workflow efficiency when using Kiro.

## Overview

Kiro Activity Analyzer is a Python CLI tool that analyzes logs, metrics, and session data from your Kiro application folder to provide insights into your development activities. All analysis happens locally on your machine to ensure complete privacy.

## Features

- **Comprehensive Metrics**: Track requests, conversations, response times, code generation, and tool usage
- **Flexible Date Ranges**: Analyze activity for any time period
- **Multiple Output Formats**: Export reports as JSON, CSV, or view in console
- **Activity Patterns**: Identify peak productivity periods and daily breakdowns
- **Privacy First**: All operations are local - no data leaves your machine
- **Extensible**: Plugin architecture for custom metrics and parsers

## Installation

### From Wheel Package

```bash
pip install kiro-analyzer-0.1.0-py3-none-any.whl
```

### From Source

```bash
# Clone the repository
git clone https://github.com/kiro/kiro-analyzer.git
cd kiro-analyzer

# Install in development mode
pip install -e .

# Or install with development dependencies
pip install -e ".[dev]"
```

### Verify Installation

```bash
kiro-analyzer --version
```

## Requirements

- Python 3.9 or higher
- Kiro application installed and used at least once

## Usage

### Basic Analysis

Analyze the last 7 days of activity (default):

```bash
kiro-analyzer analyze
```

### Specify Date Range

Analyze a specific time period:

```bash
kiro-analyzer analyze --start-date 2025-11-01 --end-date 2025-11-19
```

### Output Formats

Generate reports in different formats:

```bash
# JSON format
kiro-analyzer analyze --output-format json

# CSV format
kiro-analyzer analyze --output-format csv

# Console output (default)
kiro-analyzer analyze --output-format console
```

### Save Reports

Save analysis results to a file:

```bash
kiro-analyzer analyze --output-path ~/my-reports/productivity.json --output-format json
```

### Discover Log Files

List all available log files:

```bash
kiro-analyzer discover
```

Specify a custom directory:

```bash
kiro-analyzer discover --directory /path/to/logs
```

### Generate Reports

Generate a full metrics report for a specific period:

```bash
# Last 7 days
kiro-analyzer report --period 7d

# Last 30 days
kiro-analyzer report --period 30d --output ~/reports/monthly.json
```

### Show Log Patterns

Display recognized log file patterns:

```bash
kiro-analyzer show-patterns
```

## Metrics Tracked

The analyzer provides the following productivity metrics:

- **Request Metrics**: Total requests and conversations
- **Response Times**: Average, fastest, and slowest response times
- **Code Generation**: Total lines of code generated by language
- **Success Rate**: Percentage of successful requests
- **Tool Usage**: Frequency of each tool invocation
- **Activity Patterns**: Peak activity periods and daily breakdowns
- **Character Processing**: Total characters processed

## Configuration

The tool uses sensible defaults but can be configured via `~/.kiro-analyzer/config.json`:

```json
{
  "kiro_app_folder": "/Users/username/Library/Application Support/Kiro",
  "default_date_range_days": 7,
  "output_directory": "~/.kiro-analyzer/reports",
  "enabled_metrics": ["all"],
  "custom_parsers": []
}
```

## Privacy & Security

- **100% Local**: All analysis happens on your machine
- **No Network Calls**: The tool never transmits data externally
- **Secure Storage**: Reports are saved with user-only permissions
- **No Telemetry**: No usage tracking or analytics

## Development

### Setup Development Environment

```bash
# Clone the repository
git clone https://github.com/kiro/kiro-analyzer.git
cd kiro-analyzer

# Install with development dependencies
pip install -e ".[dev]"
```

### Run Tests

```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=kiro_analyzer --cov-report=html

# Run specific test file
pytest tests/unit/test_parsers.py
```

### Code Quality

```bash
# Format code
black src/ tests/

# Lint code
ruff check src/ tests/

# Type checking
mypy src/
```

### Build Package

```bash
# Install build tools
pip install build

# Build wheel
python -m build

# The wheel will be in dist/
```

## Extensibility

### Custom Parsers

Create custom log parsers by implementing the `LogParser` protocol:

```python
from kiro_analyzer.parsers import LogParser
from pathlib import Path
from typing import Iterator

class CustomLogParser(LogParser):
    def can_parse(self, file_path: Path) -> bool:
        return file_path.suffix == ".custom"
    
    def parse(self, file_path: Path) -> Iterator[LogEntry]:
        # Your parsing logic here
        pass
```

### Custom Metrics

Add custom metric calculators by implementing the `MetricCalculator` protocol:

```python
from kiro_analyzer.analyzers import MetricCalculator
from typing import Dict, Any, List

class CustomMetricCalculator(MetricCalculator):
    def calculate(self, entries: List[LogEntry]) -> Dict[str, Any]:
        # Your calculation logic here
        return {"custom_metric": value}
```

## Troubleshooting

### Cannot Find Kiro Application Folder

If you see an error about missing Kiro application folder:

1. Verify Kiro is installed: Check if Kiro has been run at least once
2. Specify custom path: Use `--directory` flag with `discover` command
3. Check default path: The default is `~/Library/Application Support/Kiro` on macOS

### No Data Found

If analysis returns no data:

1. Check date range: Ensure the date range includes periods when you used Kiro
2. Verify log files exist: Run `kiro-analyzer discover` to see available logs
3. Check file permissions: Ensure you have read access to the Kiro folder

### Parsing Errors

If you encounter parsing errors:

1. The tool will continue processing remaining entries
2. Check the console output for warnings about failed entries
3. Use `--verbose` flag for detailed error information

## Contributing

Contributions are welcome! Please feel free to submit issues or pull requests.

## License

MIT License - see LICENSE file for details

## Support

For issues, questions, or feature requests, please open an issue on GitHub.

## Changelog

### Version 0.1.0 (Initial Release)

- Core analysis functionality
- Support for JSON and plain text log formats
- Multiple output formats (JSON, CSV, console)
- Comprehensive productivity metrics
- CLI with multiple commands
- Extensible plugin architecture
